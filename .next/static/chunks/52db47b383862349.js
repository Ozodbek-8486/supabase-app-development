(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,48425,e=>{"use strict";var t=e.i(71645),a=e.i(74080),s=e.i(91918),l=e.i(43476),r=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce((e,a)=>{let r=t.forwardRef((e,t)=>{let{asChild:r,...i}=e,n=r?s.Slot:a;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,l.jsx)(n,{...i,ref:t})});return r.displayName=`Primitive.${a}`,{...e,[a]:r}},{});function i(e,t){e&&a.flushSync(()=>e.dispatchEvent(t))}e.s(["Primitive",()=>r,"dispatchDiscreteCustomEvent",()=>i])},75254,e=>{"use strict";var t=e.i(71645);let a=(...e)=>e.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim();var s={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let l=(0,t.forwardRef)(({color:e="currentColor",size:l=24,strokeWidth:r=2,absoluteStrokeWidth:i,className:n="",children:o,iconNode:c,...d},m)=>(0,t.createElement)("svg",{ref:m,...s,width:l,height:l,stroke:e,strokeWidth:i?24*Number(r)/Number(l):r,className:a("lucide",n),...d},[...c.map(([e,a])=>(0,t.createElement)(e,a)),...Array.isArray(o)?o:[o]])),r=(e,s)=>{let r=(0,t.forwardRef)(({className:r,...i},n)=>(0,t.createElement)(l,{ref:n,iconNode:s,className:a(`lucide-${e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,r),...i}));return r.displayName=`${e}`,r};e.s(["default",()=>r],75254)},70065,e=>{"use strict";var t=e.i(43476),a=e.i(47163);function s({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"card",className:(0,a.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...s})}function l({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"card-header",className:(0,a.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...s})}function r({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"card-title",className:(0,a.cn)("leading-none font-semibold",e),...s})}function i({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"card-description",className:(0,a.cn)("text-muted-foreground text-sm",e),...s})}function n({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"card-content",className:(0,a.cn)("px-6",e),...s})}e.s(["Card",()=>s,"CardContent",()=>n,"CardDescription",()=>i,"CardHeader",()=>l,"CardTitle",()=>r])},30030,30207,e=>{"use strict";var t=e.i(71645),a=e.i(43476);function s(e,s){let l=t.createContext(s),r=e=>{let{children:s,...r}=e,i=t.useMemo(()=>r,Object.values(r));return(0,a.jsx)(l.Provider,{value:i,children:s})};return r.displayName=e+"Provider",[r,function(a){let r=t.useContext(l);if(r)return r;if(void 0!==s)return s;throw Error(`\`${a}\` must be used within \`${e}\``)}]}function l(e,s=[]){let r=[],i=()=>{let a=r.map(e=>t.createContext(e));return function(s){let l=s?.[e]||a;return t.useMemo(()=>({[`__scope${e}`]:{...s,[e]:l}}),[s,l])}};return i.scopeName=e,[function(s,l){let i=t.createContext(l),n=r.length;r=[...r,l];let o=s=>{let{scope:l,children:r,...o}=s,c=l?.[e]?.[n]||i,d=t.useMemo(()=>o,Object.values(o));return(0,a.jsx)(c.Provider,{value:d,children:r})};return o.displayName=s+"Provider",[o,function(a,r){let o=r?.[e]?.[n]||i,c=t.useContext(o);if(c)return c;if(void 0!==l)return l;throw Error(`\`${a}\` must be used within \`${s}\``)}]},function(...e){let a=e[0];if(1===e.length)return a;let s=()=>{let s=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let l=s.reduce((t,{useScope:a,scopeName:s})=>{let l=a(e)[`__scope${s}`];return{...t,...l}},{});return t.useMemo(()=>({[`__scope${a.scopeName}`]:l}),[l])}};return s.scopeName=a.scopeName,s}(i,...s)]}function r(e){let a=t.useRef(e);return t.useEffect(()=>{a.current=e}),t.useMemo(()=>(...e)=>a.current?.(...e),[])}e.s(["createContext",()=>s,"createContextScope",()=>l],30030),e.s(["useCallbackRef",()=>r],30207)},34620,e=>{"use strict";var t=e.i(71645),a=globalThis?.document?t.useLayoutEffect:()=>{};e.s(["useLayoutEffect",()=>a])},63270,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(30030),l=e.i(30207),r=e.i(34620),i=e.i(48425),n="Avatar",[o,c]=(0,s.createContextScope)(n),[d,m]=o(n),u=a.forwardRef((e,s)=>{let{__scopeAvatar:l,...r}=e,[n,o]=a.useState("idle");return(0,t.jsx)(d,{scope:l,imageLoadingStatus:n,onImageLoadingStatusChange:o,children:(0,t.jsx)(i.Primitive.span,{...r,ref:s})})});u.displayName=n;var h="AvatarImage",x=a.forwardRef((e,s)=>{let{__scopeAvatar:n,src:o,onLoadingStatusChange:c=()=>{},...d}=e,u=m(h,n),x=function(e,t){let[s,l]=a.useState("idle");return(0,r.useLayoutEffect)(()=>{if(!e)return void l("error");let a=!0,s=new window.Image,r=e=>()=>{a&&l(e)};return l("loading"),s.onload=r("loaded"),s.onerror=r("error"),s.src=e,t&&(s.referrerPolicy=t),()=>{a=!1}},[e,t]),s}(o,d.referrerPolicy),g=(0,l.useCallbackRef)(e=>{c(e),u.onImageLoadingStatusChange(e)});return(0,r.useLayoutEffect)(()=>{"idle"!==x&&g(x)},[x,g]),"loaded"===x?(0,t.jsx)(i.Primitive.img,{...d,ref:s,src:o}):null});x.displayName=h;var g="AvatarFallback",p=a.forwardRef((e,s)=>{let{__scopeAvatar:l,delayMs:r,...n}=e,o=m(g,l),[c,d]=a.useState(void 0===r);return a.useEffect(()=>{if(void 0!==r){let e=window.setTimeout(()=>d(!0),r);return()=>window.clearTimeout(e)}},[r]),c&&"loaded"!==o.imageLoadingStatus?(0,t.jsx)(i.Primitive.span,{...n,ref:s}):null});p.displayName=g;var f=e.i(47163);function b({className:e,...a}){return(0,t.jsx)(u,{"data-slot":"avatar",className:(0,f.cn)("relative flex size-8 shrink-0 overflow-hidden rounded-full",e),...a})}function v({className:e,...a}){return(0,t.jsx)(x,{"data-slot":"avatar-image",className:(0,f.cn)("aspect-square size-full",e),...a})}function j({className:e,...a}){return(0,t.jsx)(p,{"data-slot":"avatar-fallback",className:(0,f.cn)("bg-muted flex size-full items-center justify-center rounded-full",e),...a})}e.s(["Avatar",()=>b,"AvatarFallback",()=>j,"AvatarImage",()=>v],63270)},14764,e=>{"use strict";let t=(0,e.i(75254).default)("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);e.s(["Send",()=>t],14764)},31278,e=>{"use strict";let t=(0,e.i(75254).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>t],31278)},39616,e=>{"use strict";let t=(0,e.i(75254).default)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);e.s(["Settings",()=>t],39616)},41947,e=>{"use strict";let t=(0,e.i(75254).default)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);e.s(["default",()=>t])},37727,e=>{"use strict";var t=e.i(41947);e.s(["X",()=>t.default])},92270,e=>{"use strict";let t=(0,e.i(75254).default)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);e.s(["LogOut",()=>t],92270)},31713,e=>{"use strict";var t=e.i(43476),a=e.i(71645);e.i(29225);var s=e.i(72390),l=e.i(67881),r=e.i(23750),i=e.i(70065),n=e.i(63270),o=e.i(14764),c=e.i(75254);let d=(0,c.default)("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);var m=e.i(31278),u=e.i(39616),h=e.i(37727);let x=(0,c.default)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),g=(0,c.default)("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]),p=(0,c.default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),f=(0,c.default)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),b=(0,c.default)("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]),v=(0,c.default)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),j=(0,c.default)("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);var N=e.i(92270);let w=(0,c.default)("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]),y="https://kmdphhqcfbxwbnttnmqc.supabase.co",k="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImttZHBoaHFjZmJ4d2JudHRubXFjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQ0MDAyMzcsImV4cCI6MjA3OTk3NjIzN30.4C6Rr8CFIv07blppHco_Of26SmV7k1yrahPSIYaGQO8";function C(){let[e,c]=(0,a.useState)(""),[C,S]=(0,a.useState)(""),[I,_]=(0,a.useState)([]),[z,A]=(0,a.useState)(""),[M,$]=(0,a.useState)(!1),[L,P]=(0,a.useState)(!1),[T,E]=(0,a.useState)(""),[O,B]=(0,a.useState)(""),[R,D]=(0,a.useState)(null),[q,X]=(0,a.useState)(!1),[F,U]=(0,a.useState)(""),[J,H]=(0,a.useState)(null),[V,K]=(0,a.useState)(""),[Y,Z]=(0,a.useState)(!1),[Q,G]=(0,a.useState)(!1),[W,ee]=(0,a.useState)(!1),[et,ea]=(0,a.useState)(!1),[es,el]=(0,a.useState)(""),[er,ei]=(0,a.useState)(""),[en,eo]=(0,a.useState)(!1),[ec,ed]=(0,a.useState)("Ozodbek-2008"),[em,eu]=(0,a.useState)(1),[eh,ex]=(0,a.useState)(null),[eg,ep]=(0,a.useState)(null),[ef,eb]=(0,a.useState)(null),ev=(0,a.useRef)(null),ej=(0,a.useRef)(null),eN=(0,a.useRef)();(0,a.useEffect)(()=>{let e=localStorage.getItem("supabase_anon_key");e?(D((0,s.createBrowserClient)(y,e)),X(!1)):X(!0),"true"===localStorage.getItem("chat_is_admin")&&Z(!0);let t=localStorage.getItem("chat_admin_password");t&&ed(t)},[]),(0,a.useEffect)(()=>{let e=localStorage.getItem("chat_username");if(!e){let t,a,s,l,r;a=["Sherlar","Burgut","Tulki","Bori","Lochin","Qoplon","Arslon","Laylak"],s=(t=["Tez","Aqlli","Kuchli","Baxtli","Oltin","Kumush","Yashil","Kok"])[Math.floor(Math.random()*t.length)],l=a[Math.floor(Math.random()*a.length)],r=Math.floor(100*Math.random()),e=`${s}${l}${r}`,localStorage.setItem("chat_username",e)}c(e),E(e);let t=localStorage.getItem("chat_avatar")||"";S(t),B(t)},[]),(0,a.useEffect)(()=>{if(!e||!R)return;(async()=>{try{let{data:e,error:t}=await R.from("chat_messages").select("*").order("created_at",{ascending:!0});if(t){console.error("Yuklashda xatolik:",JSON.stringify(t,null,2)),ey("Yuklashda xatolik","error");return}e&&_(e)}catch(e){console.error("Xatolik:",e)}})();let t=R.channel("chat-realtime").on("postgres_changes",{event:"INSERT",schema:"public",table:"chat_messages"},e=>{let t=e.new;_(e=>e.find(e=>e.id===t.id)?e:[...e,t])}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"chat_messages"},e=>{let t=e.new;_(e=>e.map(e=>e.id===t.id?t:e))}).on("postgres_changes",{event:"DELETE",schema:"public",table:"chat_messages"},e=>{let t=e.old;_(e=>e.filter(e=>e.id!==t.id))}).subscribe();return()=>{R.removeChannel(t)}},[e,R]),(0,a.useEffect)(()=>{ev.current&&(ev.current.scrollTop=ev.current.scrollHeight),eu(new Set(I.map(e=>e.username)).size)},[I]);let ew=async t=>{if(t.preventDefault(),z.trim()&&!M&&R){$(!0);try{let{error:t}=await R.from("chat_messages").insert({username:e,content:z.trim(),avatar_url:C});t?(console.error("Yuborishda xatolik:",JSON.stringify(t,null,2)),ey("Yuborishda xatolik","error")):A("")}catch(e){console.error("Xatolik:",e)}finally{$(!1)}}},ey=(e,t="success")=>{void 0!==eN.current&&clearTimeout(eN.current),ex({message:e,type:t}),eN.current=setTimeout(()=>ex(null),2500)},ek=async e=>{if(V.trim()&&R)try{await R.from("chat_messages").update({content:V.trim()}).eq("id",e),H(null),K(""),ey("Xabar tahrirlandi","success")}catch(e){console.error("Tahrirlashda xatolik:",e),ey("Tahrirlashda xatolik","error")}},eC=async e=>{eb(e)},eS=async e=>{if(!R)return void ey("Supabase ulanmadi","error");try{let{error:t}=await R.from("chat_messages").delete().eq("id",e);t?(console.error("O'chirishda xatolik:",t),ey("O'chirishda xatolik","error")):(ey("Xabar o'chirildi","success"),eb(null))}catch(e){console.error("O'chirishda xatolik:",e),ey("O'chirishda xatolik","error")}},eI=e=>{let t=["bg-rose-500","bg-sky-500","bg-emerald-500","bg-amber-500","bg-violet-500","bg-pink-500","bg-indigo-500","bg-teal-500"];return t[e.charCodeAt(0)%t.length]};return q||!R?(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center p-4 bg-gradient-to-br from-slate-50 to-indigo-100",children:(0,t.jsxs)(i.Card,{className:"w-full max-w-md p-6",children:[(0,t.jsxs)("div",{className:"text-center mb-6",children:[(0,t.jsx)(d,{className:"w-12 h-12 mx-auto mb-3 text-indigo-600"}),(0,t.jsx)("h2",{className:"text-xl font-bold text-slate-800",children:"Supabase Anon Key"}),(0,t.jsx)("p",{className:"text-sm mt-2 text-slate-500",children:"Quyidagi keyni nusxalab inputga tashlang"})]}),(0,t.jsx)("div",{className:"mb-6 p-3 bg-slate-100 rounded-lg",children:(0,t.jsxs)("div",{className:"flex items-center justify-between gap-2 min-h-12",children:[(0,t.jsxs)("code",{className:"text-xs text-slate-600 flex-1 overflow-auto max-h-16 font-mono",children:[k.substring(0,40),"...***"]}),(0,t.jsx)("button",{type:"button",onClick:()=>{navigator.clipboard.writeText(k),ey("Nusxalandi","success")},className:"shrink-0 p-2 hover:bg-slate-200 rounded-lg transition-colors ml-2",title:"Nusxalash",children:(0,t.jsx)(f,{className:"w-4 h-4 text-slate-600"})})]})}),(0,t.jsxs)("form",{onSubmit:e=>{e.preventDefault(),F&&(localStorage.setItem("supabase_anon_key",F),D((0,s.createBrowserClient)(y,F)),X(!1))},children:[(0,t.jsx)(r.Input,{value:F,onChange:e=>U(e.target.value),placeholder:"Tepadagi keyni nusxalang va buyerga tashlang...",className:"mb-4"}),(0,t.jsx)(l.Button,{type:"submit",className:"w-full bg-indigo-600 hover:bg-indigo-700",children:"Saqlash va boshlash"})]})]})}):e?(0,t.jsxs)("div",{className:"h-screen flex flex-col bg-black overflow-hidden",children:[(0,t.jsx)("header",{className:"bg-slate-900/90 backdrop-blur-sm shadow-sm p-3 sm:p-4 shrink-0 relative z-60",children:(0,t.jsxs)("div",{className:"max-w-4xl mx-auto flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 sm:gap-3",children:[(0,t.jsx)("div",{className:"p-2 rounded-xl bg-indigo-100",children:(0,t.jsx)(d,{className:"w-5 h-5 sm:w-6 sm:h-6 text-indigo-600"})}),(0,t.jsx)("h1",{className:"text-lg sm:text-xl font-bold text-white",children:"Muhokama"}),(0,t.jsxs)("span",{className:"bg-green-500/20 text-green-400 text-xs px-2 py-1 rounded-full font-medium flex items-center gap-1",children:["ðŸŸ¢ ",em," onlayn"]}),Y&&(0,t.jsxs)("span",{className:"bg-amber-100 text-amber-700 text-xs px-2 py-0.5 rounded-full font-medium flex items-center gap-1",children:[(0,t.jsx)(b,{className:"w-3 h-3"})," Admin"]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("button",{onClick:()=>Y?ee(!W):G(!0),className:`p-2 rounded-xl transition-colors ${Y?"bg-amber-100 hover:bg-amber-200 text-amber-600":"hover:bg-slate-100 text-slate-400 hover:text-slate-600"}`,title:Y?"Admin menyu":"Admin kirish",children:(0,t.jsx)(b,{className:"w-4 h-4 sm:w-5 sm:h-5"})}),W&&Y&&(0,t.jsxs)("div",{className:"absolute right-0 top-12 bg-white shadow-xl rounded-xl py-2 z-100 min-w-[180px] border border-slate-200",children:[(0,t.jsxs)("button",{onClick:()=>{ea(!0),ee(!1)},className:"w-full px-4 py-2 text-left text-sm hover:bg-slate-50 flex items-center gap-2 text-slate-700",children:[(0,t.jsx)(w,{className:"w-4 h-4"})," Parolni almashtirish"]}),(0,t.jsxs)("button",{onClick:()=>{Z(!1),localStorage.removeItem("chat_is_admin"),ee(!1)},className:"w-full px-4 py-2 text-left text-sm hover:bg-rose-50 flex items-center gap-2 text-rose-600",children:[(0,t.jsx)(N.LogOut,{className:"w-4 h-4"})," Adminlikdan chiqish"]})]})]}),(0,t.jsxs)("button",{onClick:()=>P(!0),className:"flex items-center gap-1 sm:gap-2 hover:bg-slate-100 rounded-xl p-1.5 sm:p-2 transition-colors",children:[(0,t.jsxs)(n.Avatar,{className:"h-7 w-7 sm:h-8 sm:w-8 ring-2 ring-indigo-500 ring-offset-1",children:[C?(0,t.jsx)(n.AvatarImage,{src:C}):null,(0,t.jsx)(n.AvatarFallback,{className:`${eI(e)} text-white text-xs sm:text-sm font-medium`,children:e.charAt(0).toUpperCase()})]}),(0,t.jsx)("span",{className:"font-medium text-xs sm:text-sm text-slate-700 hidden sm:block",children:e}),(0,t.jsx)(u.Settings,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 text-slate-400"})]})]})]})}),Q&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4",onClick:()=>G(!1),children:(0,t.jsxs)(i.Card,{className:"w-full max-w-sm p-4 sm:p-6 relative bg-white",onClick:e=>e.stopPropagation(),children:[(0,t.jsx)("button",{onClick:()=>G(!1),className:"absolute top-3 right-3 p-1 rounded-lg hover:bg-slate-100 text-slate-500",children:(0,t.jsx)(h.X,{className:"w-5 h-5"})}),(0,t.jsxs)("div",{className:"text-center mb-4",children:[(0,t.jsx)(b,{className:"w-12 h-12 mx-auto mb-2 text-amber-500"}),(0,t.jsx)("h2",{className:"text-lg font-bold text-slate-800",children:"Admin kirish"})]}),(0,t.jsxs)("div",{className:"relative mb-4",children:[(0,t.jsx)(r.Input,{type:en?"text":"password",value:es,onChange:e=>el(e.target.value),placeholder:"Admin paroli",className:"pr-10"}),(0,t.jsx)("button",{type:"button",onClick:()=>eo(!en),className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600",children:en?(0,t.jsx)(j,{className:"w-4 h-4"}):(0,t.jsx)(v,{className:"w-4 h-4"})})]}),(0,t.jsx)(l.Button,{onClick:()=>{es===ec?(Z(!0),localStorage.setItem("chat_is_admin","true"),G(!1),el(""),eo(!1),ey("Admin logindan kirildi","success")):ey("Parol noto'g'ri","error")},className:"w-full bg-amber-500 hover:bg-amber-600",children:"Kirish"})]})}),et&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4",onClick:()=>ea(!1),children:(0,t.jsxs)(i.Card,{className:"w-full max-w-sm p-4 sm:p-6 relative bg-white",onClick:e=>e.stopPropagation(),children:[(0,t.jsx)("button",{onClick:()=>ea(!1),className:"absolute top-3 right-3 p-1 rounded-lg hover:bg-slate-100 text-slate-500",children:(0,t.jsx)(h.X,{className:"w-5 h-5"})}),(0,t.jsxs)("div",{className:"text-center mb-4",children:[(0,t.jsx)(w,{className:"w-12 h-12 mx-auto mb-2 text-indigo-500"}),(0,t.jsx)("h2",{className:"text-lg font-bold text-slate-800",children:"Parolni almashtirish"})]}),(0,t.jsxs)("div",{className:"relative mb-4",children:[(0,t.jsx)(r.Input,{type:en?"text":"password",value:er,onChange:e=>ei(e.target.value),placeholder:"Yangi parol",className:"pr-10"}),(0,t.jsx)("button",{type:"button",onClick:()=>eo(!en),className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600",children:en?(0,t.jsx)(j,{className:"w-4 h-4"}):(0,t.jsx)(v,{className:"w-4 h-4"})})]}),(0,t.jsx)(l.Button,{onClick:()=>{er.length<4?ey("Parol kamida 4 ta belgi bo'lishi kerak","error"):(ed(er),localStorage.setItem("chat_admin_password",er),ei(""),ea(!1),eo(!1),ey("Parol muvaffaqiyatli o'zgartirildi","success"))},className:"w-full bg-indigo-600 hover:bg-indigo-700",children:"Saqlash"})]})}),L&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4",onClick:()=>P(!1),children:(0,t.jsxs)(i.Card,{className:"w-full max-w-md p-4 sm:p-6 relative bg-white",onClick:e=>e.stopPropagation(),children:[(0,t.jsx)("button",{onClick:()=>P(!1),className:"absolute top-3 right-3 sm:top-4 sm:right-4 p-1 rounded-lg hover:bg-slate-100 text-slate-500",children:(0,t.jsx)(h.X,{className:"w-5 h-5"})}),(0,t.jsx)("h2",{className:"text-lg sm:text-xl font-bold mb-4 sm:mb-6 text-center text-slate-800",children:"Profil sozlamalari"}),(0,t.jsxs)("div",{className:"flex flex-col items-center mb-4 sm:mb-6",children:[(0,t.jsxs)(n.Avatar,{className:"h-20 w-20 sm:h-24 sm:w-24 ring-4 ring-indigo-500 ring-offset-2 mb-3",children:[O?(0,t.jsx)(n.AvatarImage,{src:O}):null,(0,t.jsx)(n.AvatarFallback,{className:`${eI(T||e)} text-white text-2xl font-bold`,children:(T||e).charAt(0).toUpperCase()})]}),(0,t.jsx)("input",{ref:ej,type:"file",accept:"image/*",onChange:e=>{let t=e.target.files?.[0];if(!t)return;let a=new FileReader;a.onloadend=()=>{B(a.result)},a.readAsDataURL(t)},className:"hidden"}),(0,t.jsxs)(l.Button,{type:"button",variant:"outline",size:"sm",onClick:()=>ej.current?.click(),children:[(0,t.jsx)(x,{className:"w-4 h-4 mr-2"}),"Rasm yuklash"]})]}),(0,t.jsxs)("div",{className:"mb-3 sm:mb-4",children:[(0,t.jsx)("label",{className:"text-sm font-medium text-slate-700",children:"Ism"}),(0,t.jsx)(r.Input,{value:T,onChange:e=>E(e.target.value),placeholder:"Ismingiz",className:"mt-1"})]}),(0,t.jsxs)("div",{className:"mb-4 sm:mb-6",children:[(0,t.jsx)("label",{className:"text-sm font-medium text-slate-700",children:"Rasm URL (ixtiyoriy)"}),(0,t.jsx)(r.Input,{value:O,onChange:e=>B(e.target.value),placeholder:"https://example.com/avatar.jpg",className:"mt-1"})]}),(0,t.jsx)(l.Button,{onClick:()=>{T.trim()&&(c(T.trim()),localStorage.setItem("chat_username",T.trim())),O&&(S(O),localStorage.setItem("chat_avatar",O)),P(!1)},className:"w-full bg-indigo-600 hover:bg-indigo-700",children:"Saqlash"})]})}),ef&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4",onClick:()=>eb(null),children:(0,t.jsxs)(i.Card,{className:"w-full max-w-sm p-4 sm:p-6 relative bg-white",onClick:e=>e.stopPropagation(),children:[(0,t.jsx)("button",{onClick:()=>eb(null),className:"absolute top-3 right-3 p-1 rounded-lg hover:bg-slate-100 text-slate-500",children:(0,t.jsx)(h.X,{className:"w-5 h-5"})}),(0,t.jsxs)("div",{className:"text-center mb-4",children:[(0,t.jsx)(p,{className:"w-12 h-12 mx-auto mb-2 text-red-500"}),(0,t.jsx)("h2",{className:"text-lg font-bold text-slate-800",children:"Xabarni o'chirish"}),(0,t.jsx)("p",{className:"text-sm text-slate-600 mt-2",children:"Bu amalni bekor qilish mumkin emas. Davom etmoqchimisiz?"})]}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)(l.Button,{variant:"outline",onClick:()=>eb(null),className:"flex-1",children:"Bekor qilish"}),(0,t.jsxs)(l.Button,{onClick:()=>eS(ef),className:"flex-1 bg-red-600 hover:bg-red-700 text-white",children:[(0,t.jsx)(p,{className:"w-4 h-4 mr-2"})," O'chirish"]})]})]})}),W&&(0,t.jsx)("div",{className:"fixed inset-0 z-40",onClick:()=>ee(!1)}),(0,t.jsx)("div",{className:"flex-1 min-h-0 overflow-hidden",children:(0,t.jsx)("div",{className:"h-full max-w-4xl w-full mx-auto p-2 sm:p-4 flex flex-col",children:(0,t.jsxs)(i.Card,{className:"flex-1 min-h-0 flex flex-col overflow-hidden bg-slate-800/80 backdrop-blur-sm",children:[(0,t.jsx)("div",{className:"flex-1 min-h-0 overflow-y-auto p-3 sm:p-4",ref:ev,children:0===I.length?(0,t.jsx)("div",{className:"h-full flex items-center justify-center text-slate-500",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"w-14 h-14 sm:w-16 sm:h-16 rounded-2xl mx-auto mb-3 flex items-center justify-center bg-slate-100",children:(0,t.jsx)(d,{className:"w-7 h-7 sm:w-8 sm:h-8 opacity-50"})}),(0,t.jsx)("p",{className:"text-sm sm:text-base font-medium",children:"Hali xabarlar yoq"}),(0,t.jsx)("p",{className:"text-xs sm:text-sm opacity-70",children:"Birinchi bolib xabar yozing!"})]})}):(0,t.jsx)("div",{className:"space-y-3 sm:space-y-4",children:I.map(a=>{let s,i,c,d,m,u,x=a.username===e,b=J===a.id,v=a.username===e||Y;return(0,t.jsxs)("div",{className:`flex gap-2 sm:gap-3 ${x?"flex-row-reverse":""}`,children:[(0,t.jsxs)(n.Avatar,{className:"h-8 w-8 sm:h-9 sm:w-9 shrink-0",children:[x&&C&&(0,t.jsx)(n.AvatarImage,{src:C,alt:e}),!x&&a.avatar_url&&(0,t.jsx)(n.AvatarImage,{src:a.avatar_url,alt:a.username}),(0,t.jsx)(n.AvatarFallback,{className:`${eI(a.username)} text-white text-xs sm:text-sm font-medium`,children:a.username.charAt(0).toUpperCase()})]}),(0,t.jsxs)("div",{className:`max-w-[75%] sm:max-w-[70%] ${x?"text-right":""}`,children:[(0,t.jsxs)("div",{className:`flex items-center gap-1 sm:gap-2 mb-1 ${x?"flex-row-reverse":""}`,children:[(0,t.jsx)("span",{className:"text-xs sm:text-sm font-semibold text-white",children:a.username}),(0,t.jsx)("span",{className:"text-[10px] sm:text-xs text-gray-400",children:(s=new Date(a.created_at),i=new Date,c=s.toDateString()===i.toDateString(),(d=new Date(i)).setDate(d.getDate()-1),m=s.toDateString()===d.toDateString(),u=s.toLocaleTimeString("uz-UZ",{hour:"2-digit",minute:"2-digit"}),c?`Bugun, ${u}`:m?`Kecha, ${u}`:`${s.toLocaleDateString("uz-UZ",{day:"numeric",month:"short",year:"numeric"})}, ${u}`)})]}),b?(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(r.Input,{value:V,onChange:e=>K(e.target.value),className:"text-sm",autoFocus:!0}),(0,t.jsx)(l.Button,{size:"sm",onClick:()=>ek(a.id),children:(0,t.jsx)(o.Send,{className:"w-3 h-3"})}),(0,t.jsx)(l.Button,{size:"sm",variant:"ghost",onClick:()=>H(null),children:(0,t.jsx)(h.X,{className:"w-3 h-3"})})]}):(0,t.jsxs)("div",{className:"group",children:[(0,t.jsx)("div",{className:`inline-block rounded-2xl px-3 py-2 sm:px-4 sm:py-2.5 ${x?"bg-indigo-600 text-white rounded-tr-sm":"bg-slate-700 text-white rounded-tl-sm shadow-sm border border-slate-600"}`,children:(0,t.jsx)("p",{className:"text-xs sm:text-sm whitespace-pre-wrap break-words",children:a.content})}),(0,t.jsxs)("div",{className:`flex gap-1 mt-1 opacity-0 group-hover:opacity-100 transition-opacity ${x?"justify-end":"justify-start"}`,children:[(0,t.jsx)("button",{onClick:()=>{var e,t;return e=a.id,t=a.content,void navigator.clipboard.writeText(t).then(()=>{ep(e),ey("Nusxalandi","success"),setTimeout(()=>ep(null),2e3)}).catch(()=>{ey("Nusxalashda xatolik","error")})},className:`p-1.5 rounded-lg transition-colors ${eg===a.id?"bg-green-100 text-green-600":"text-slate-400 hover:bg-slate-100 hover:text-slate-600"}`,title:"Nusxalash",children:eg===a.id?"âœ“":(0,t.jsx)(f,{className:"w-3.5 h-3.5"})}),v&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("button",{onClick:()=>{H(a.id),K(a.content)},className:"p-1.5 hover:bg-slate-100 rounded-lg text-slate-400 hover:text-blue-600 transition-colors",title:"Tahrirlash",children:(0,t.jsx)(g,{className:"w-3.5 h-3.5"})}),(0,t.jsx)("button",{onClick:()=>eC(a.id),className:"p-1.5 hover:bg-rose-50 rounded-lg text-slate-400 hover:text-rose-600 transition-colors",title:"O'chirish",children:(0,t.jsx)(p,{className:"w-3.5 h-3.5"})})]})]})]})]})]},a.id)})})}),(0,t.jsx)("div",{className:"p-3 sm:p-4 shrink-0 bg-slate-800 border-t border-slate-700",children:(0,t.jsxs)("form",{onSubmit:ew,className:"flex gap-2",children:[(0,t.jsx)(r.Input,{placeholder:"Xabar yozing...",value:z,onChange:e=>A(e.target.value),disabled:M,className:"flex-1 text-sm h-11 bg-slate-700 text-white border-slate-600 focus:border-indigo-500 focus:ring-indigo-500",autoFocus:!0}),(0,t.jsx)(l.Button,{type:"submit",disabled:!z.trim()||M,className:"px-4 sm:px-5 h-11 bg-indigo-600 hover:bg-indigo-700 text-white",children:M?(0,t.jsx)(m.Loader2,{className:"h-4 w-4 sm:h-5 sm:w-5 animate-spin"}):(0,t.jsx)(o.Send,{className:"h-4 w-4 sm:h-5 sm:w-5"})})]})})]})})}),eh&&(0,t.jsxs)("div",{className:`fixed bottom-4 left-4 right-4 sm:bottom-6 sm:right-6 sm:left-auto sm:w-auto max-w-xs px-4 py-3 rounded-lg shadow-lg flex items-center gap-2 z-50 animate-in fade-in slide-in-from-bottom-4 ${"success"===eh.type?"bg-green-500 text-white":"error"===eh.type?"bg-red-500 text-white":"bg-blue-500 text-white"}`,children:["success"===eh.type&&"âœ“ ","error"===eh.type&&"âœ• ",eh.message]})]}):(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-slate-50",children:(0,t.jsx)(m.Loader2,{className:"h-8 w-8 animate-spin text-indigo-600"})})}e.s(["default",()=>C],31713)}]);